<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link href="css/main.css" rel="stylesheet" />
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
 
    <div class="container mt-3">
      <div class="card p-3">
        <span class = "product-name">이름</span>
        <span class = "product-price">가격</span>
      </div>
      
      <form class="container my-5 form-group">
        <p>상품선택</p>
        
        <select class="form-select mt-2 product">
          <option>모자</option>
          <option>셔츠</option>
          <option>바지</option>    
        </select>
        
        <select class="form-select mt-3 size  form-hide" >
         
        </select>
        
      </form>


  
      


    </div>

    <script>
      let fetchdata = [];

      $(document).ready(function() {
    $.ajax({
        url: 'http://127.0.0.1:5400/getdata',
        type: 'GET',
        dataType: 'json',
        success: function(data) {
          fetchdata = data;
          // console.log(data);
            // 데이터 처리
        },
        error: function(error) {
            console.error('Error:', error);
        }
    });
});

    </script>

    <script>
      /*
      javascript로 html 만드는방법
      // */
      // var a = document.createElement('p');
      // a.innerHTML = 'test';
      // document.querySelector("#test").appendChild(a);
      /*
      문자형 html 넣어주는 함수 insertAdjacentHTML
       */ 
      //var template = '<p>안녕</p>';
      //document.querySelector("#test").insertAdjacentHTML('beforeend',template);

  

      $(".form-select").eq(0).on("input" , function() {
        var value = this.value;
        window.alert(value);

        if(value == "셔츠" ) {
          document.querySelector(".size").classList.remove("form-hide");
          $(".size").html('');
          var shirt_template =  `<option>95</option>
          <option>100</option>
          <option>105</option>`;
          $(".size").append(shirt_template); 
          
        }
        else if (this.value == "바지") {  
          document.querySelector(".size").classList.remove("form-hide");
          $(".size").html('');
          
          //array에 붙일수있는 foreach a가 하나하나의 값 array갯수만큼 반복함
          // fetchdata.forEach(function(a){
          //   console.log(a);
          //   $('.size').append(`<option>${a.size}</option>`);
          // })
          //object 다룰때 쉬운 for in 문법 key는 i값 fetchdata는 object
          // for (var key in fetchdata) {
          //   console.log(fetchdata[key].size);
          //   $('.size').append(`<option>${fetchdata[key].size}</option>`);
          // }
          //같은 foreach지만 arrow를 써서 function을 스킵할수가 있다. arrow function
          //다른점은 function의 this와 arrow function의 this값은 달라질수있다.
          fetchdata.forEach((a) => { 
            $(".size").append(`<option>${a.size}</option>`);
          });
          }

        }
      
      
      )
        
      /*
      jquery
      */
      //$("#test").append(template);
    </script>


    <script>
      /**
       *값의 변경을 듣고싶을때는 addevenetlistener
      스크립트 안에 한 코드는 페이지 로드할때 한번만 실행되는거임 알아둬야함 
       */ 
     
       // document.querySelector('.product').addEventListener('change', function(e) {
      // if (e.currentTarget.value == "셔츠") {
      //   document.querySelector(".size").classList.remove("form-hide");
        //jquery로는 $(".class").eq(n).val()
     // }
      // else {
      //   document.querySelector(".size").classList.add("form-hide");
      // }
    
  //});


      

    </script>
    <script>
      //array
      var car = ['소나타' , 50000 , 'white'];
      //object key value 형 key value로 나눌수있다는게 장점
      //오브젝트 안에는 아무거나 다 넣을수 있음 array도 집어넣을수도 있음
      var car2 = {name : "소나타", price : [50000]}
    
      car2.price[1] = car2.price[0] * 0.7;

      document.querySelector('.product-name').innerHTML = car2.name;
      document.querySelectorAll('.product-price')[0].textContent = car2.price[1];
     
     </script>

<div class="container mt-5">
  <ul class="list">
    <li class="tab-button" data-id="0">Products</li>
    <li class="tab-button orange"  data-id="1">Information</li>
    <li class="tab-button"  data-id="2">Shipping</li>
    <li class="tab-button"  data-id="3">PC</li>
  </ul>
  <div class="tab-content">
    <p>상품설명입니다. Product</p>
  </div>
  <div class="tab-content show">
    <p>스펙설명입니다. Information</p>
  </div>
  <div class="tab-content">
    <p>배송정보입니다. Shipping</p>
  </div>
  <div class="tab-content">
    <p>PC정보입니다.</p>
  </div>
</div> 

    </body>



    <script src="javascript/detail.js"></script>

    

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
